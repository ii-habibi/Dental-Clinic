<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/styles.css">
    <title>Home - Services</title>
</head>
<body>
    <h1>Welcome to Our Dental Clinic</h1>
    <a href="https://web.whatsapp.com/send?phone=923496563330" target="_blank" class="whatsapp-button">
        <button type="button">Call Now</button>
    </a>
    
    <h2>Our Services</h2>
    
    <ul>
        <% services.forEach(service => { %>
            <li>
                <h3><%= service.name %></h3>
                <p><%= service.description %></p>
                <p>Price: PKR<%= service.price %></p>
            </li>
        <% }); %>
    </ul>


    <h1>Latest Blogs</h1>
    <div>
        <% if (blogs.length === 0) { %>
            <p>No blogs available.</p>
        <% } else { %>
            <% blogs.forEach(blog => { %>
                <div>
                    <h2><%= blog.title %></h2>
                    <p><strong>By <%= blog.author %></strong> | <%= blog.published_date %></p>
                    <p><%= blog.content %></p>
                </div>
            <% }); %>
        <% } %>
    </div>

    <!-- Doctor Profiles Section -->
<div class="doctor-profiles">
    <h2>Our Doctors</h2>
    <div class="doctor-list">
        <% doctors.forEach(doctor => { %>
            <div class="doctor-card">
                <img src="<%= doctor.photo %>" alt="<%= doctor.name %>" class="doctor-photo">
                <h3><%= doctor.name %></h3>
                <p><strong>Qualification:</strong> <%= doctor.qualification %></p>
                <p><strong>Expertise:</strong> <%= doctor.expertise %></p>
            </div>
        <% }) %>
    </div>
</div>



<!-- Appointment section  -->


<h1>Book an Appointment</h1>
<form id="appointmentForm">
    <label for="name">Name:</label>
    <input type="text" name="patient_name" id="name" required>
    <br>
    <label for="email">Email:</label>
    <input type="email" name="patient_email" id="email" required>
    <br>
    <label for="phone">Phone Number:</label>
    <input type="tel" name="patient_phone" id="phone" required>
    <br>
    <label for="doctor">Select Doctor:</label>
    <select name="doctor_id" id="doctor" required>
        <% doctors.forEach(doctor => { %>
            <option value="<%= doctor.id %>"><%= doctor.name %></option>
        <% }) %>
    </select>
    <br>
    <label for="date">Date:</label>
    <input type="date" name="appointment_date" id="date" required>
    <br>
    <label for="time">Time:</label>
    <input type="time" name="appointment_time" id="time">
    <br>
    <label for="treatment">Treatment Type:</label>
    <input type="text" name="treatment_type" id="treatment" required>
    <br>
    <label for="visitType">Visit Type:</label>
    <select name="visit_type" id="visitType" required>
        <option value="first">First Visit</option>
        <option value="return">Return Patient</option>
    </select>
    <br>
    <button type="submit">Book Appointment</button>
</form>


<script>
    document.getElementById('appointmentForm').addEventListener('submit', function(event) {
        event.preventDefault();
    
        const formData = new FormData(event.target);
        const data = Object.fromEntries(formData.entries()); // Convert form data to a plain object
    
        fetch('/dashboard/appointments/book', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data) // Send data as JSON
        })
        .then(response => response.json())
        .then(data => {
            if (data.message === 'Appointment booked successfully') {
                alert('Appointment booked successfully!');
                event.target.reset();
            } else {
                alert(data.message);
            }
        })
        .catch(error => console.error('Error booking appointment:', error));
    });
    </script>
    


</body>
</html>
